$(document).ready(function(){$("#generationSelect").on("change",function(){showSelectedGeneration()});showSelectedGeneration();$(".showAllSpecs").on("click",function(){if($(".collapseSpecs:visible").length){$(".collapseSpecs").hide();$(".showAllSpecs").html("Hide all specs")}else{$(".collapseSpecs").show().css("display","flex");$(".showAllSpecs").html("Show all specs")}});if(sessionStorage.isThankYou==="true"){sessionStorage.removeItem("isThankYou");$("#thankYou").modal("show")}if($(".trimType").length>0){hasTrimTypes=true}else{hasTrimTypes=false}$(".toRateTrim").on("click",function(){$(".typeInfo").modal("hide");showDialog("trim");var generation=$(this).data("generation");var series=$(this).data("series");var IDTrim=$(this).data("idtrim");$("#ratingFormGeneration").val(generation);$("#ratingFormSeries").val(generation+";"+series);$("#ratingFormTrim").val(generation+";"+series+";"+IDTrim)});$("#showModelDialog").on("click",function(){showDialog("model")});$("#showReviewDialog").on("click",function(){showDialog("review")});$("#ratingForm").on("submit",function(event){var trimNameArray=$("#ratingFormTrim").val().split(";");$("#ratingFormTrimId").val(trimNameArray[2]);var testProfanities=true;var profanities=$("#profanities").val().split(" ");if($("#ratingFormContent:visible").length){var content=$("#ratingFormContent").val();isReview=true;var contentWords=content.split(" ");for(index=0;index<profanities.length;index++){for(word=0;word<contentWords.length;word++){if(profanities[index]===contentWords[word].toLowerCase()){testProfanities=false;break}}}}if(!testProfanities){$("#reviewWarning").html("No swearing please.<BR>");event.preventDefault()}else if(!$("#reCAPTCHAScript").length){$("#hideAll").show();var head_ID=document.getElementsByTagName("head")[0];var script_element=document.createElement("script");script_element.type="text/javascript";script_element.id="reCAPTCHAScript";script_element.src="https://www.google.com/recaptcha/api.js?render="+$("#reCAPTCHAKey").val();head_ID.appendChild(script_element);$("#reCAPTCHAScript").on("load",function(){grecaptcha.ready(function(){grecaptcha.execute($("#reCAPTCHAKey").val(),{action:"validateCAPTCHA"}).then(function(reCAPTCHAToken){$("#reCAPTCHAToken").val(reCAPTCHAToken);$.post($("#ratingForm").attr("action"),$("#ratingForm").serialize(),function(data){if(data==="true"){sessionStorage.isThankYou="true"}location.reload()})})})});event.preventDefault()}});var menuGenerations=$("#ratingFormGeneration");var menuSeries=$("#ratingFormSeries");var menuSeriesOptions=$("#ratingFormSeries option");var menuTrims=$("#ratingFormTrim");var menuTrimsOptions=$("#ratingFormTrim option");menuSeriesOptions.hide();menuTrimsOptions.hide();menuGenerations.on("change",function(){var selectedGeneration=$(this).val();menuSeriesOptions.hide();menuTrimsOptions.hide();menuSeries.val("");menuTrims.val("");menuSeriesOptions.each(function(){if($(this).val()!==""){var seriesArray=$(this).val().split(";");if(seriesArray[0]===selectedGeneration){$(this).show()}}else{$(this).show()}})});menuSeries.on("change",function(){var selectedGeneration=$(this).val();var selectedSeries=$(this).val();menuTrimsOptions.hide();menuTrims.val("");menuTrimsOptions.each(function(){if($(this).val()!==""){var trimArray=$(this).val().split(";");if(trimArray[0]+";"+trimArray[1]===selectedSeries){$(this).show();if(hasTrimTypes===false){$(this).prop("selected",true)}else{$(this).show()}}}else{$(this).show()}})});function showDialog(typeShow){var winW=$(window).width();var winH=$(window).height();$("#ratingFormGeneration").show();$("#ratingFormSeries").show();$("#ratingFormTrim").show();$("#divArea").show();if(hasTrimTypes===false){$("#ratingFormTrim").hide()}if(typeShow==="review"){$("#ratingFormContent").prop("required",true)}else{$("#divArea").hide();$("#ratingFormContent").prop("required",false);if(typeShow==="trim"){$("#ratingFormGeneration").hide();$("#ratingFormSeries").hide();$("#ratingFormTrim").hide()}}}function showSelectedGeneration(){$(".generations").hide();$("#generation"+$("#generationSelect option:selected").val()).show()}});