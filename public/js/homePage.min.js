$(document).ready(function(){sessionStorage.lazyLoad=false;let checkAll=$(".check-all");$("#slider-top").carousel();checkAll.on("click",function(){$("."+$(this).data("spec-name")).prop("checked",$(this).prop("checked"))});$("#filter-top-form-show-all").on("click",function(event){if($("#aspects-table:visible").length){$("#choices").addClass("col-xl-12").removeClass("col-xl-4").removeClass("vertical")}else{$("#choices").addClass("col-xl-4").addClass("vertical").removeClass("col-xl-12")}if($(".collapse-choice:visible").length){$(".collapse-choice").toggle()}else{$(".collapse-choice").toggle().css("display","inline")}$(".collapse-aspects").toggle();if($(".collapse-range:visible").length){$(".collapse-range").toggle()}else{$(".collapse-range").toggle().css("display","flex")}$("#preferences-dialog").show();$("html, body").animate({scrollTop:$("#choose-preferences").offset().top},1e3);event.preventDefault()});$("#filter-top-form-reset").on("click",function(event){checkAll.each(function(){$(this).prop("checked",true);$("."+$(this).data("spec-name")).each(function(){$(this).prop("checked",true)})});$("#min-num-votes").val($("#min-num-votes-default").val());$(".aspect-element").each(function(){$(this).val(1)});$(".specs-range").each(function(){$(this).val("")});event.preventDefault()});$("#choose-preferences").on("click",function(){$("#preferences-dialog").toggle();$("html, body").animate({scrollTop:$("#choose-preferences").offset().top},1e3)});let numShowMoreLess=parseInt($("#num-show-more-less").val());if(typeof sessionStorage.numberOfRows==="undefined"){sessionStorage.numberOfRows=$("#table-top tr").length}if(typeof sessionStorage.topTable!=="undefined"){$("#fillable-table").html(sessionStorage.topTable);$("#slideshow").html(sessionStorage.slideshow);$("#at-least-votes").html("<em>with at least "+sessionStorage.minNumVotes+" votes</em>");$(".check-all").click();$.each(sessionStorage.filterFormSerializedValues.split("&"),function(index,value){let valueArray=value.split("=");let formElement=$("[name='"+decodeURIComponent(valueArray[0])+"']");formElement.val(decodeURIComponent(valueArray[1]));formElement.prop("checked",true)})}showPartTopTable(sessionStorage.numberOfRows);$("#show-more").on("click",function(event){let height=$(document).height();let y=$(window).scrollTop();let topRows=$(".top-row");let topRowsVisible=$(".top-row:visible");if(topRowsVisible.length+numShowMoreLess>topRows.length){if(topRowsVisible.length%10===0){sessionStorage.numberOfRows=topRowsVisible.length+numShowMoreLess}else{sessionStorage.numberOfRows=topRowsVisible.length+numShowMoreLess-topRowsVisible.length%10}let dataRequest="numberOfRows="+sessionStorage.numberOfRows+"&offset="+topRows.length+"&"+$("#filter-top-form").serialize();$.get($(this).attr("href"),dataRequest,function(data){let tableTop=$("#table-top");tableTop.append(data);sessionStorage.numberOfRows=$("#table-top tr").length;sessionStorage.topTable=tableTop[0].outerHTML;showPartTopTable(sessionStorage.numberOfRows);let heightNew=$(document).height();$(window).scrollTop(y+heightNew-height)})}else{sessionStorage.numberOfRows=parseInt(sessionStorage.numberOfRows)+numShowMoreLess;showPartTopTable(sessionStorage.numberOfRows);let heightNew=$(document).height();$(window).scrollTop(y+heightNew-height)}event.preventDefault()});$("#show-less").on("click",function(event){if(sessionStorage.numberOfRows>numShowMoreLess){let height=$(document).height();let y=$(window).scrollTop();if($("#table-top tr").length%10===0){sessionStorage.numberOfRows=parseInt(sessionStorage.numberOfRows)-numShowMoreLess}else{sessionStorage.numberOfRows=parseInt(sessionStorage.numberOfRows)-parseInt(sessionStorage.numberOfRows)%10}showPartTopTable(sessionStorage.numberOfRows);let heightNew=$(document).height();$(window).scrollTop(y+heightNew-height)}event.preventDefault()});$("#filter-top-form").on("submit",function(event){let rows;let topRowsVisible=$(".top-row:visible");if(topRowsVisible.length<numShowMoreLess){rows=numShowMoreLess}else{rows=topRowsVisible.length}sessionStorage.filterFormSerializedValues=$(this).serialize();$.get($(this).attr("action"),$(this).serialize()+"&numberOfRows="+rows,function(data){let array=data.split(/splitPoint/);let tableTopTrs=$("#table-top tr");$("#fillable-table").html(array[0]);$("#slideshow").html(array[1]);$("#at-least-votes").html("<em>with at least "+array[2]+" votes</em>");sessionStorage.topTable=array[0];sessionStorage.slideshow=array[1];sessionStorage.minNumVotes=array[2];$("#carousel").carousel();showPartTopTable(tableTopTrs.length);sessionStorage.numberOfRows=tableTopTrs.length;$("html, body").animate({scrollTop:$("#top-cars").offset().top},1e3)});event.preventDefault()});function showPartTopTable(numberOfRows){$("#table-top tr").hide();$(".top-row").slice(0,numberOfRows).show().css("display","flex");$("#top-or-less-number").html(numberOfRows)}});