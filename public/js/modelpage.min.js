$(document).ready(function(){$("#generationSelect").on("change",function(){showSelectedGeneration()});showSelectedGeneration();$(".showAllSpecs").on("click",function(){if($(".collapseSpecs:visible").length){$(".collapseSpecs").hide();$(".showAllSpecs").html("Hide all specs")}else{$(".collapseSpecs").show().css("display","flex");$(".showAllSpecs").html("Show all specs")}showSelectedGeneration()});if(isThankYou){$("#thankyou").modal("show")}var menuGenerations=$("#rating_form_generation");var menuSeries=$("#rating_form_serie");var menuTrims=$("#rating_form_trim");for(var gen in generationsSeriesTrims){menuGenerations.append('<option value="'+gen+'">'+gen+"</option>")}showSeriesSelect();showTrimsSelect();menuGenerations.on("change",function(){showSeriesSelect()});menuSeries.on("change",function(){showTrimsSelect()});function showSeriesSelect(){var selectedGen=$("#rating_form_generation").val();menuSeries.empty();menuSeries.append('<option value="">Series</option>');if($("#rating_form_generation option:selected").text()==="Generation"){return}for(var serie in generationsSeriesTrims[selectedGen]){menuSeries.append('<option value="'+selectedGen+" "+serie+'">'+serie+"</option>")}}function showTrimsSelect(){var selectedGen=menuGenerations.val();var selectedSerie=$("#rating_form_serie option:selected").text();menuTrims.empty();menuTrims.append('<option value="">Trims</option>');if($("#rating_form_serie option:selected").text()==="Series"){return}for(var trim in generationsSeriesTrims[selectedGen][selectedSerie]){var trimId=generationsSeriesTrims[selectedGen][selectedSerie][trim];menuTrims.append('<option value="'+trimId+'">'+trim+"</option>");if(hasTrimTypes===0){$("#rating_form_trim").val(trimId)}}}$(".toRateTrim").on("click",function(){$(".typeInfo").modal("hide");showDialog("trim");var generation=$(this).data("generation");var serie=$(this).data("serie");var IDTrim=$(this).data("idtrim");$("#rating_form_generation").val(generation);showSeriesSelect();$("#rating_form_serie").val(generation+" "+serie);showTrimsSelect();$("#rating_form_trim").val(IDTrim)});$("#showModelDialog").on("click",function(){showDialog("model")});$("#showReviewDialog").on("click",function(){showDialog("review")});$("#rating_form_submit").on("click",function(event){if($("#rating_form_content:visible").length){var content=$("#rating_form_content").val();isReview=true;var contentWords=content.split(" ");var testProfanities=true;for(index=0;index<profanities.length;index++){for(word=0;word<contentWords.length;word++){if(profanities[index]===contentWords[word]){testProfanities=false;break}}}if(!testProfanities){$("#reviewWarning").html("No swearing please.<BR>");event.preventDefault()}}event.preventDefault();var head_ID=document.getElementsByTagName("head")[0];var script_element=document.createElement("script");script_element.type="text/javascript";script_element.id="reCaptchaScript";script_element.src="https://www.google.com/recaptcha/api.js?render="+reCaptchaKey;head_ID.appendChild(script_element);$("#reCaptchaScript").on("load",function(){grecaptcha.ready(function(){grecaptcha.execute(reCaptchaKey,{action:"rate"}).then(function(reCaptchaToken){$("#reCaptchaToken").val(reCaptchaToken);$("#rating-form").submit()})})})});function showDialog(typeShow){var winW=$(window).width();var winH=$(window).height();if(typeShow==="review"){$("#divArea").show();$("#rating_form_content").prop("required",true)}else{$("#divArea").hide();$("#rating_form_content").prop("required",false)}if(typeShow==="trim"){$("#rating_form_generation").hide().prop("required",false).val("");$("#rating_form_serie").hide().prop("required",false).val("");$("#rating_form_trim").hide().prop("required",false).val("")}else{$("#rating_form_generation").show().prop("required",true);$("#rating_form_serie").show().prop("required",true);if(hasTrimTypes===1){$("#rating_form_trim").show().prop("required",true)}else{$("#rating_form_trim").hide().prop("required",false)}}}function showSelectedGeneration(){$(".generations").hide();id=$("#generationSelect option:selected").val();$("#generation"+id).show()}});