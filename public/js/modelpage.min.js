$(document).ready(function(){$("#generationSelect").on("change",function(){showSelectedGeneration()});showSelectedGeneration();$(".showAllSpecs").on("click",function(){if($(".collapseSpecs:visible").length){$(".collapseSpecs").hide();$(".showAllSpecs").html("Hide all specs")}else{$(".collapseSpecs").show().css("display","flex");$(".showAllSpecs").html("Show all specs")}});if(sessionStorage.isThankYou==="true"){sessionStorage.removeItem("isThankYou");$("#thankYou").modal("show")}if($(".trimType").length>0){hasTrimTypes=true}else{hasTrimTypes=false}$(".toRateTrim").on("click",function(){$(".typeInfo").modal("hide");showDialog("trim");var generation=$(this).data("generation");var serie=$(this).data("serie");var IDTrim=$(this).data("idtrim");$("#rating_form_generation").val(generation);$("#rating_form_serie").val(generation+";"+serie);$("#rating_form_trim").val(generation+";"+serie+";"+IDTrim)});$("#showModelDialog").on("click",function(){showDialog("model")});$("#showReviewDialog").on("click",function(){showDialog("review")});$("#rating-form").on("submit",function(event){var testProfanities=true;var profanities=$("#profanities").val().split(" ");if($("#rating_form_content:visible").length){var content=$("#rating_form_content").val();isReview=true;var contentWords=content.split(" ");for(index=0;index<profanities.length;index++){for(word=0;word<contentWords.length;word++){if(profanities[index]===contentWords[word].toLowerCase()){testProfanities=false;break}}}}if(!testProfanities){$("#reviewWarning").html("No swearing please.<BR>");event.preventDefault()}else if(!$("#reCaptchaScript").length){$("#hideAll").show();var head_ID=document.getElementsByTagName("head")[0];var script_element=document.createElement("script");script_element.type="text/javascript";script_element.id="reCaptchaScript";script_element.src="https://www.google.com/recaptcha/api.js?render="+$("#reCaptchaKey").val();head_ID.appendChild(script_element);$("#reCaptchaScript").on("load",function(){grecaptcha.ready(function(){grecaptcha.execute($("#reCaptchaKey").val(),{action:"rateCar"}).then(function(reCaptchaToken){$("#reCaptchaToken").val(reCaptchaToken);$.post("/rateCar",$("#rating-form").serialize(),function(data){if(data==="true"){sessionStorage.isThankYou="true"}location.reload()})})})});event.preventDefault()}});var menuGenerations=$("#rating_form_generation");var menuSeries=$("#rating_form_serie");var menuSeriesOptions=$("#rating_form_serie option");var menuTrims=$("#rating_form_trim");var menuTrimsOptions=$("#rating_form_trim option");menuSeriesOptions.hide();menuTrimsOptions.hide();menuGenerations.on("change",function(){var selectedGeneration=$(this).val();menuSeriesOptions.hide();menuTrimsOptions.hide();menuSeries.val("");menuTrims.val("");menuSeriesOptions.each(function(){if($(this).val()!==""){var serieArray=$(this).val().split(";");if(serieArray[0]===selectedGeneration){$(this).show()}}else{$(this).show()}})});menuSeries.on("change",function(){var selectedGeneration=$(this).val();var selectedSerie=$(this).val();menuTrimsOptions.hide();menuTrims.val("");menuTrimsOptions.each(function(){if($(this).val()!==""){var trimArray=$(this).val().split(";");if(trimArray[0]+";"+trimArray[1]===selectedSerie){$(this).show();if(hasTrimTypes===false){$(this).prop("selected",true)}else{$(this).show()}}}else{$(this).show()}})});function showDialog(typeShow){var winW=$(window).width();var winH=$(window).height();$("#rating_form_generation").show();$("#rating_form_serie").show();$("#rating_form_trim").show();$("#divArea").show();if(hasTrimTypes===false){$("#rating_form_trim").hide()}if(typeShow==="review"){$("#rating_form_content").prop("required",true)}else{$("#divArea").hide();$("#rating_form_content").prop("required",false);if(typeShow==="trim"){$("#rating_form_generation").hide();$("#rating_form_serie").hide();$("#rating_form_trim").hide()}}}function showSelectedGeneration(){$(".generations").hide();$("#generation"+$("#generationSelect option:selected").val()).show()}});