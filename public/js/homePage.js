"use strict";$(document).ready(function(){sessionStorage.lazyLoad=!1;var o=$(".check-all");$("#slider-top").carousel(),o.on("click",function(){$("."+$(this).data("spec-name")).prop("checked",$(this).prop("checked"))}),$("#filter-top-form-show-all").on("click",function(e){$("#aspects-table:visible").length?$("#choices").addClass("col-xl-12").removeClass("col-xl-4").removeClass("vertical"):$("#choices").addClass("col-xl-4").addClass("vertical").removeClass("col-xl-12"),$(".collapse-choice:visible").length?$(".collapse-choice").toggle():$(".collapse-choice").toggle().css("display","inline"),$(".collapse-aspects").toggle(),$(".collapse-range:visible").length?$(".collapse-range").toggle():$(".collapse-range").toggle().css("display","flex"),$("#preferences-dialog").show(),$("html, body").animate({scrollTop:$("#choose-preferences").offset().top},1e3),e.preventDefault()}),$("#filter-top-form-reset").on("click",function(e){o.each(function(){$(this).prop("checked",!0),$("."+$(this).data("spec-name")).each(function(){$(this).prop("checked",!0)})}),$("#min-num-votes").val($("#min-num-votes-default").val()),$(".aspect-element").each(function(){$(this).val(1)}),$(".specs-range").each(function(){$(this).val("")}),e.preventDefault()}),$("#choose-preferences").on("click",function(){$("#preferences-dialog").toggle(),$("html, body").animate({scrollTop:$("#choose-preferences").offset().top},1e3)});var a=parseInt($("#num-show-more-less").val());function r(e){$("#table-top tr").hide(),$(".top-row").slice(0,e).show().css("display","flex"),$("#top-or-less-number").html(e)}void 0===sessionStorage.numberOfRows&&(sessionStorage.numberOfRows=$("#table-top tr").length),void 0!==sessionStorage.topTable&&($("#fillable-table").html(sessionStorage.topTable),$("#slideshow").html(sessionStorage.slideshow),$("#at-least-votes").html("<em>with at least "+sessionStorage.minNumVotes+" votes</em>"),$(".check-all").click(),$.each(sessionStorage.filterFormSerializedValues.split("&"),function(e,o){var s=o.split("="),o=$("[name='"+decodeURIComponent(s[0])+"']");o.val(decodeURIComponent(s[1])),o.prop("checked",!0)})),r(sessionStorage.numberOfRows),$("#show-more").on("click",function(e){var o,s=$(document).height(),t=$(window).scrollTop(),l=$(".top-row"),n=$(".top-row:visible");n.length+a>l.length?(n.length%10==0?sessionStorage.numberOfRows=n.length+a:sessionStorage.numberOfRows=n.length+a-n.length%10,o="number-of-rows="+sessionStorage.numberOfRows+"&offset="+l.length+"&"+$("#filter-top-form").serialize(),$.get($(this).attr("href"),o,function(e){var o=$("#table-top");o.append(e),sessionStorage.numberOfRows=$("#table-top tr").length,sessionStorage.topTable=o[0].outerHTML,r(sessionStorage.numberOfRows);o=$(document).height();$(window).scrollTop(t+o-s)})):(sessionStorage.numberOfRows=parseInt(sessionStorage.numberOfRows)+a,r(sessionStorage.numberOfRows),o=$(document).height(),$(window).scrollTop(t+o-s)),e.preventDefault()}),$("#show-less").on("click",function(e){var o,s,t;sessionStorage.numberOfRows>a&&(o=$(document).height(),s=$(window).scrollTop(),$("#table-top tr").length%10==0?sessionStorage.numberOfRows=parseInt(sessionStorage.numberOfRows)-a:sessionStorage.numberOfRows=parseInt(sessionStorage.numberOfRows)-parseInt(sessionStorage.numberOfRows)%10,r(sessionStorage.numberOfRows),t=$(document).height(),$(window).scrollTop(s+t-o)),e.preventDefault()}),$("#filter-top-form").on("submit",function(e){var o=$(".top-row:visible"),o=o.length<a?a:o.length;sessionStorage.filterFormSerializedValues=$(this).serialize(),$.get($(this).attr("action"),$(this).serialize()+"&number-of-rows="+o,function(e){var o=e.split(/splitPoint/),e=$("#table-top tr");$("#fillable-table").html(o[0]),$("#slideshow").html(o[1]),$("#at-least-votes").html("<em>with at least "+o[2]+" votes</em>"),sessionStorage.topTable=o[0],sessionStorage.slideshow=o[1],sessionStorage.minNumVotes=o[2],$("#carousel").carousel(),r(e.length),sessionStorage.numberOfRows=e.length,$("html, body").animate({scrollTop:$("#top-cars").offset().top},1e3)}),e.preventDefault()})});