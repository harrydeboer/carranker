$(document).ready(function(){sessionStorage.lazyLoad=false;$("#sliderTop").carousel();$(".checkAll").on("click",function(){$("."+$(this).data("specname")).prop("checked",$(this).prop("checked"))});$("#filterTopFormShowAll").on("click",function(event){if($("#aspectsTable:visible").length){$("#choices").addClass("col-xl-12").removeClass("col-xl-4").removeClass("vertical")}else{$("#choices").addClass("col-xl-4").addClass("vertical").removeClass("col-xl-12")}if($(".collapseChoice:visible").length){$(".collapseChoice").toggle()}else{$(".collapseChoice").toggle().css("display","inline")}$(".collapseAspects").toggle();if($(".collapseRange:visible").length){$(".collapseRange").toggle()}else{$(".collapseRange").toggle().css("display","flex")}$("#preferencesDialog").show();$("html, body").animate({scrollTop:$("#choosePreferences").offset().top},1e3);event.preventDefault()});$("#filterTopFormReset").on("click",function(event){$(".checkAll").each(function(){$(this).prop("checked",true);$("."+$(this).data("specname")).each(function(){$(this).prop("checked",true)})});$("#minNumVotes").val($("#minNumVotesDefault").val());$(".aspectElement").each(function(){$(this).val(1)});$(".specsRange").each(function(){$(this).val("")});event.preventDefault()});$("#choosePreferences").on("click",function(){$("#preferencesDialog").toggle();$("html, body").animate({scrollTop:$("#choosePreferences").offset().top},1e3)});numShowMoreLess=parseInt($("#numShowMoreLess").val());if(typeof sessionStorage.numberOfRows==="undefined"){sessionStorage.numberOfRows=$("#tableTop tr").length}if(typeof sessionStorage.topTable!=="undefined"){$("#fillableTable").html(sessionStorage.topTable);$("#slideshow").html(sessionStorage.slideshow);$("#atLeastVotes").html("<em>with at least "+sessionStorage.minNumVotes+" votes</em>");$(".checkAll").click();$.each(sessionStorage.filterTopForm.split("&"),function(index,elem){var vals=elem.split("=");$("[name='"+decodeURIComponent(vals[0])+"']").val(decodeURIComponent(vals[1]));$("[name='"+decodeURIComponent(vals[0])+"']").prop("checked",true)})}showPartTopTable(sessionStorage.numberOfRows);$("#showMore").on("click",function(){var height=$(document).height();var y=$(window).scrollTop();if($(".topRow:visible").length+numShowMoreLess>$(".topRow").length){if($(".topRow:visible").length%10===0){sessionStorage.numberOfRows=$(".topRow:visible").length+numShowMoreLess}else{sessionStorage.numberOfRows=$(".topRow:visible").length+numShowMoreLess-$(".topRow:visible").length%10}$.get("showMoreTopTable/"+sessionStorage.numberOfRows+"/"+$(".topRow").length,$("#filterTopForm").serialize(),function(data){$("#tableTop").append(data);sessionStorage.numberOfRows=$("#tableTop tr").length;sessionStorage.topTable=$("#tableTop")[0].outerHTML;showPartTopTable(sessionStorage.numberOfRows);var heightNew=$(document).height();$(window).scrollTop(y+heightNew-height)})}else{sessionStorage.numberOfRows=parseInt(sessionStorage.numberOfRows)+numShowMoreLess;showPartTopTable(sessionStorage.numberOfRows);var heightNew=$(document).height();$(window).scrollTop(y+heightNew-height)}});$("#showLess").on("click",function(){if(sessionStorage.numberOfRows>numShowMoreLess){var height=$(document).height();var y=$(window).scrollTop();if($("#tableTop tr").length%10===0){sessionStorage.numberOfRows=parseInt(sessionStorage.numberOfRows)-parseInt(numShowMoreLess)}else{sessionStorage.numberOfRows=parseInt(sessionStorage.numberOfRows)-parseInt(sessionStorage.numberOfRows)%10}showPartTopTable(sessionStorage.numberOfRows);var heightNew=$(document).height();$(window).scrollTop(y+heightNew-height)}});$("#filterTopForm").on("submit",function(event){var rows;if($(".topRow:visible").length<numShowMoreLess){rows=numShowMoreLess}else{rows=$(".topRow:visible").length}sessionStorage.filterTopForm=$(this).serialize();$.get("filterTop",$(this).serialize()+"&numberOfRows="+rows,function(data){var array=data.split(/splitPoint/);$("#fillableTable").html(array[0]);$("#slideshow").html(array[1]);$("#atLeastVotes").html("<em>with at least "+array[2]+" votes</em>");sessionStorage.topTable=array[0];sessionStorage.slideshow=array[1];sessionStorage.minNumVotes=array[2];$("#carousel").carousel();showPartTopTable($("#tableTop tr").length);sessionStorage.numberOfRows=$("#tableTop tr").length;$("html, body").animate({scrollTop:$("#topCars").offset().top},1e3)});event.preventDefault()});function showPartTopTable(numberOfRows){$("#tableTop tr").hide();$(".topRow").slice(0,numberOfRows).show().css("display","flex");$("#topOrLessNumber").html(numberOfRows)}});