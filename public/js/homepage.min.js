$(document).ready(function(){$(document).on("click",".choice-menu",function(event){event.stopPropagation()});if($("#sliderTop").length){$("#sliderTop").carousel();$("#carouselExampleIndicators").carousel()}$(".checkAll").on("click",function(){$("."+$(this).data("specname")).prop("checked",$(this).prop("checked"))});$("#filterTopFormShowAll").on("click",function(event){if($("#choices.btn-group-vertical").length){$("#choices").removeClass("btn-group-vertical");$("#choices").addClass("col-md-12").removeClass("col-md-4 col-xs-12")}else{$("#choices").addClass("btn-group-vertical");$("#choices").addClass("col-md-4 col-xs-12").removeClass("col-md-12")}$(".collapseChoice").toggle();$(".collapseAspects").toggle();if($(".collapseRange:visible").length){$(".collapseRange").toggle()}else{$(".collapseRange").toggle().css("display","flex")}$("#preferencesDialog").show();$("html, body").animate({scrollTop:$("#choosePreferences").offset().top},1e3);event.preventDefault()});$("#filterTopFormReset").on("click",function(event){for(var index in specsChoice){$("."+index).each(function(){$(this).prop("checked",true)})}$("#minVotes").val(minNumVotes);$(".aspectElement").each(function(){$(this).val(1)});$(".checkAll").each(function(){$(this).prop("checked",true)});$(".specsRange").each(function(){$(this).prop("selectedIndex",0)});event.preventDefault()});if(typeof sessionStorage.numberOfRows==="undefined"){sessionStorage.numberOfRows=topNumber}$("#choosePreferences").on("click",function(){$("#preferencesDialog").toggle();$("html, body").animate({scrollTop:$("#choosePreferences").offset().top},1e3)});sessionStorage.numberOfRows=$("#tableTop tr").length;showPartTopTable();$("#showMore").on("click",function(){var height=$(document).height();var y=$(window).scrollTop();if($("#tableTop tr").length%10===0){sessionStorage.numberOfRows=parseInt(sessionStorage.numberOfRows)+parseInt(numShowMoreLess)}else{sessionStorage.numberOfRows=parseInt(sessionStorage.numberOfRows)+parseInt(numShowMoreLess)-$("#tableTop tr").length%10}if(sessionStorage.numberOfRows>$(".topRow").length){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});$("#hideAll").show();if(!$("#reCaptchaScript").length){var head_ID=document.getElementsByTagName("head")[0];var script_element=document.createElement("script");script_element.type="text/javascript";script_element.id="reCaptchaScript";script_element.src="https://www.google.com/recaptcha/api.js?render="+reCaptchaKey;head_ID.appendChild(script_element);$("#reCaptchaScript").on("load",function(){grecaptcha.ready(function(){recaptchaExecuteShowMoreTopTable()})})}else{recaptchaExecuteShowMoreTopTable()}}else{showPartTopTable();var heightNew=$(document).height();$(window).scrollTop(y+heightNew-height)}});$("#showLess").on("click",function(){if(sessionStorage.numberOfRows>10){var height=$(document).height();var y=$(window).scrollTop();if($("#tableTop tr").length%10===0){sessionStorage.numberOfRows=parseInt(sessionStorage.numberOfRows)-parseInt(numShowMoreLess)}else{sessionStorage.numberOfRows=parseInt(sessionStorage.numberOfRows)-parseInt(sessionStorage.numberOfRows)%10}showPartTopTable();var heightNew=$(document).height();$(window).scrollTop(y+heightNew-height)}});$("#filterTopForm").on("submit",function(event){$("#hideAll").show();$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});serializedForm=$(this).serialize();if(!$("#reCaptchaScript").length){var head_ID=document.getElementsByTagName("head")[0];var script_element=document.createElement("script");script_element.type="text/javascript";script_element.id="reCaptchaScript";script_element.src="https://www.google.com/recaptcha/api.js?render="+reCaptchaKey;head_ID.appendChild(script_element);$("#reCaptchaScript").on("load",function(){grecaptcha.ready(function(){recaptchaExecuteFilterTop()})})}else{recaptchaExecuteFilterTop()}event.preventDefault()});function recaptchaExecuteShowMoreTopTable(){var height=$(document).height();var y=$(window).scrollTop();grecaptcha.execute(reCaptchaKey,{action:"showMoreTopTable"}).then(function(reCaptchaToken){$.post("showMoreTopTable/"+sessionStorage.numberOfRows+"/"+$(".topRow").length,"",function(data){$("#tableTop").append(data);$("#hideAll").hide();sessionStorage.numberOfRows=$("#tableTop tr").length;showPartTopTable();var heightNew=$(document).height();$(window).scrollTop(y+heightNew-height)})})}function recaptchaExecuteFilterTop(){grecaptcha.execute(reCaptchaKey,{action:"filterTop"}).then(function(reCaptchaToken){serializedForm+="&reCaptchaToken="+reCaptchaToken+"&numberOfRows="+sessionStorage.numberOfRows;$.post("filterTop",serializedForm,function(data){var array=data.split(/splitPoint/);$("#fillableTable").html(array[0]);$("#slideshow").html(array[1]);$("#atLeastVotes").html("<em>with at least "+array[2]+" votes</em>");$("#hideAll").hide();sessionStorage.numberOfRows=$("#tableTop tr").length;showPartTopTable();$("#carousel").carousel();$("#preferencesDialog").css("margin-top","0");$("html, body").animate({scrollTop:$("#topCars").offset().top},1e3);lazyloadImages=document.querySelectorAll("img.lazy");setTimeout(lazyload,3e3)})})}function showPartTopTable(){$("#tableTop tr").hide();$(".topRow").slice(0,sessionStorage.numberOfRows).show().css("display","flex");$("#topOrLessNumber").html(Math.min(sessionStorage.numberOfRows,$(".topRow").length))}});