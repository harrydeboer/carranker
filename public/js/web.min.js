$(document).ready(function(){let menuMake=$("#nav-select-make");let menuModel=$("#nav-select-model");menuMake.on("change",function(){fillModelMenu()});menuModel.on("change",function(){navigate()});$("#search-form-submit").on("click",function(event){if($("#search-form-text").val()===""){event.preventDefault();if(menuMake.val()!==""){navigate()}}});function fillModelMenu(){let selectedMake=menuMake.val();menuModel.empty();menuModel.append('<option value="">Model</option>');if(selectedMake===""){return}$.get("/api/getModelNames/"+selectedMake,null,function(modelNames){$.each(modelNames,function(index,value){menuModel.append('<option value="'+value+'">'+value+"</option>")})})}function navigate(){if(menuModel.val()===""){window.location.href="/make/"+encodeURIComponent(menuMake.val())}else{window.location.href="/model/"+encodeURIComponent(menuMake.val())+"/"+encodeURIComponent(menuModel.val())}}});function reCAPTCHA(form,page){$("#hideAll").show();let headId=document.getElementsByTagName("head")[0];let scriptElement=document.createElement("script");scriptElement.type="text/javascript";scriptElement.id="re-captcha-script";scriptElement.src="https://www.google.com/recaptcha/api.js?render="+$("#re-captcha-key").val();headId.appendChild(scriptElement);$("#re-captcha-script").on("load",function(){grecaptcha.ready(function(){grecaptcha.execute($("#re-captcha-key").val(),{action:"validateReCAPTCHA"},false).then(function(reCAPTCHAToken){$("#re-captcha-token").val(reCAPTCHAToken);if(page==="contactPage"){form.submit()}else if(page==="modelPage"){$.post(form.attr("action"),form.serialize(),function(data){if(data==="true"){sessionStorage.isThankYou="true"}location.reload()})}})})})}